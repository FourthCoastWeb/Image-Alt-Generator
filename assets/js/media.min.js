!function(e,t,a){"use strict";if(t.media&&t.media.view){var n={};s(),function(){var a=t.media;for(var n in t.media=function(){var e=a.apply(this,arguments);return e&&e.on&&e.on("open",(function(){setTimeout((function(){s()}),10)})),e},a)a.hasOwnProperty(n)&&(t.media[n]=a[n]);e(document).on("click",".media-modal",(function(){setTimeout((function(){s()}),100)}))}()}else console.warn("Media Meta Generator: wp.media not found");function i(e){if(!e.$(".media-meta-generator-controls").length){var t=`<div class="media-meta-generator-controls">\n                    <h3>\n                        <a class="media-meta-generator-fcw-logo" href="https://fourthcoastweb.com" target="_blank" rel="noopener">\n                            <img\n                                class="media-meta-generator-fcw-logo__img"\n                                src="${media_meta_generator_vars.pluginUrl}assets/img/fourth-coast-web-logo.png"\n                                alt="Fourth Coast Web Logo"\n                            />\n                        </a>\n                        <span><span class="media-meta-generator-title">Image Metadata Generator</span> <br />Instantly populate the alt text, title, and description fields below.</span>\n                    </h3>\n                    <details>\n                        <summary><span class="details-summary">Context Keywords</span></summary>\n                        <label class="setting">\n                            <p>Add specific keywords to guide the AI and include in the generated text. Separate keywords with commas.</p>\n                            <input type="text" class="media-meta-generator-keywords" value="" placeholder="e.g. sunset, happy, logo" />\n                        </label>\n                        <div class="media-meta-generator-include-keywords">\n                            <p>Include the keywords in the generated:</p>\n                            <div class="include-keywords-checkboxes">\n                                <span class="setting-include-keywords">\n                                    <input type="checkbox" id="media-meta-generator-include-keywords-alt" class="media-meta-generator-include-keywords-alt" checked />\n                                    <label for="media-meta-generator-include-keywords-alt">Alt Text</label>\n                                </span>\n\n                                <span class="setting-include-keywords">\n                                    <input type="checkbox" id="media-meta-generator-include-keywords-title" class="media-meta-generator-include-keywords-title" />\n                                    <label for="media-meta-generator-include-keywords-title">Title</label>\n                                </span>\n\n                                <span class="setting-include-keywords">\n                                    <input type="checkbox" id="media-meta-generator-include-keywords-description" class="media-meta-generator-include-keywords-description" checked />\n                                    <label for="media-meta-generator-include-keywords-description">Description</label>\n                                </span>\n                            </div>\n                        </div>\n                    </details>\n                    <div class="actions">\n                        <button type="button" class="button button-secondary media-meta-generator-generate-btn">${media_meta_generator_vars.strings.generate}</button>\n                        <span class="spinner"></span>\n                    </div>\n                </div>`;setTimeout((function(){var a=null;(a=e.$(".settings")).length?a.before(t):(a=e.$(".attachment-info")).length?a.after(t):(a=e.$(".attachment-details")).length?a.prepend(t):(e.$el.hasClass("attachment-details"),e.$el.prepend(t))}),50)}}function r(n){return n.extend({events:a.extend({},n.prototype.events,{"click .media-meta-generator-generate-btn":"generateAltText"}),render:function(){return n.prototype.render.apply(this,arguments),i(this),this},generateAltText:function(a){!function(a,n){a.preventDefault();var i=n.model.get("filename"),r=i.slice(2+(i.lastIndexOf(".")-1>>>0)).toLowerCase();if(-1!==["jpg","jpeg","png","webp","avif","gif"].indexOf(r)){var s=n.model.get("id"),o=n.$(".media-meta-generator-keywords").val(),d=n.$(".media-meta-generator-generate-btn"),l=n.$(".media-meta-generator-controls .spinner"),c=n.$(".media-meta-generator-include-keywords-alt").is(":checked"),m=n.$(".media-meta-generator-include-keywords-title").is(":checked"),g=n.$(".media-meta-generator-include-keywords-description").is(":checked");d.prop("disabled",!0).text(media_meta_generator_vars.strings.generating),l.addClass("is-active"),t.ajax.post("media_meta_generator_generate_alt",{nonce:media_meta_generator_vars.nonce,attachment_id:s,keywords:o,include_keywords_in_alt:c,include_keywords_in_title:m,include_keywords_in_description:g}).done((function(t){t.alt_text&&n.model.set("alt",t.alt_text),t.title&&n.model.set("title",t.title),t.description&&n.model.set("description",t.description);var a=n.$('[data-setting="alt"]'),i=n.$('[data-setting="title"]'),r=n.$('[data-setting="description"]');a.length&&!a.is(":input")&&(a=a.find("input, textarea")),i.length&&!i.is(":input")&&(i=i.find("input, textarea")),r.length&&!r.is(":input")&&(r=r.find("input, textarea")),a.length||(a=e('.media-modal [data-setting="alt"]')).length&&!a.is(":input")&&(a=a.find("input, textarea")),i.length||(i=e('.media-modal [data-setting="title"]')).length&&!i.is(":input")&&(i=i.find("input, textarea")),r.length||(r=e('.media-modal [data-setting="description"]')).length&&!r.is(":input")&&(r=r.find("input, textarea")),a.length&&t.alt_text&&a.val(t.alt_text).trigger("change"),i.length&&t.title&&i.val(t.title).trigger("change"),r.length&&t.description&&r.val(t.description).trigger("change"),n.model.save(),d.text("Success!"),setTimeout((function(){d.prop("disabled",!1).text(media_meta_generator_vars.strings.generate)}),2e3)})).fail((function(e){console.error("Media Meta Generator: Error",e),alert(media_meta_generator_vars.strings.error+(e.message||"Unknown error")),d.prop("disabled",!1).text(media_meta_generator_vars.strings.generate)})).always((function(){l.removeClass("is-active")}))}else alert(media_meta_generator_vars.strings.invalid_filetype)}(a,this)}})}function s(){var e=t.media.view.Attachment.Details;e&&!n.Details&&(t.media.view.Attachment.Details=r(e),n.Details=!0);var a=t.media.view.Attachment.Details.TwoColumn;a&&!n.TwoColumn&&(t.media.view.Attachment.Details.TwoColumn=r(a),n.TwoColumn=!0)}}(jQuery,wp,_);